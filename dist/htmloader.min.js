var __awaiter=this&&this.__awaiter||function(t,o,s,d){return new(s=s||Promise)(function(i,e){function r(t){try{n(d.next(t))}catch(t){e(t)}}function a(t){try{n(d.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,a)}n((d=d.apply(t,o||[])).next())})};class HtmLoader{constructor(){this.useComponentIn=function(n){return __awaiter(this,void 0,void 0,function*(){var e=document.querySelectorAll("[data-hl-load]");for(let t=0;t<e.length;t++){var i=e[t].getAttribute("data-hl-load"),r=JSON.parse(e[t].getAttribute("data-hl-use")),a="false"!==e[t].getAttribute("data-hl-override");this._target=e[t],yield this.withData(r).render(n+`/${i}.html`,a),e[t].removeAttribute("data-hl-use"),e[t].removeAttribute("data-hl-override")}})},this.target=function(t){var e=new HtmLoader;return e._target=document.querySelector(t),e},this.withData=function(t){return null!=t&&(Array.isArray(t)?this._data=t:this._data.push(t)),this},this.render=function(e,i){return __awaiter(this,void 0,void 0,function*(){var t=yield(yield fetch(e)).text();0===this._data.length&&this._data.push({dummy:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quam, recusandae."}),yield this.doRender(t,i)})},this.injectDataToString=function(t,i){return __awaiter(this,void 0,void 0,function*(){let e=yield t;return Object.keys(i).forEach(t=>{e=e.replace("::"+t,i[t])}),e})},this.convertStringtoNode=function(i){return __awaiter(this,void 0,void 0,function*(){var t=document.createElement("div"),e=yield i;return t.innerHTML=e.trim(),t.firstChild})},this.doRender=function(i,r){return __awaiter(this,void 0,void 0,function*(){for(let t=0;t<this._data.length;t++){var e=yield this.injectDataToString(i,this._data[t]);if(r)return yield this._target.parentNode.replaceChild(yield this.convertStringtoNode(e),this._target),this.resetClass(),0;yield this._target.append(yield this.convertStringtoNode(e)),t>=this._data.length&&this.resetClass()}})},this.resetClass=function(){this._data=[],this._target=null},this._target=null,this._data=[]}}